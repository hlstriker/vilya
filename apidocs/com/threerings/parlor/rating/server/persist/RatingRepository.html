<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Sat Mar 14 10:07:08 PDT 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>RatingRepository (Vilya Core 1.6 API)</title>
<meta name="date" content="2015-03-14">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RatingRepository (Vilya Core 1.6 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RatingRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/threerings/parlor/rating/server/persist/RatingRepository.html" target="_top">Frames</a></li>
<li><a href="RatingRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.com.samskivert.depot.DepotRepository">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.threerings.parlor.rating.server.persist</div>
<h2 title="Class RatingRepository" class="title">Class RatingRepository</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true" title="class or interface in com.samskivert.depot">com.samskivert.depot.DepotRepository</a></li>
<li>
<ul class="inheritance">
<li>com.threerings.parlor.rating.server.persist.RatingRepository</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">RatingRepository</span>
extends <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true" title="class or interface in com.samskivert.depot">DepotRepository</a></pre>
<div class="block">Handles the persistent storage of per-user per-game ratings.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.samskivert.depot.DepotRepository">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;com.samskivert.depot.<a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true" title="class or interface in com.samskivert.depot">DepotRepository</a></h3>
<code><a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.CacheStrategy.html?is-external=true" title="class or interface in com.samskivert.depot">DepotRepository.CacheStrategy</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#RatingRepository-com.samskivert.depot.PersistenceContext-">RatingRepository</a></span>(<a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/PersistenceContext.html?is-external=true" title="class or interface in com.samskivert.depot">PersistenceContext</a>&nbsp;ctx)</code>
<div class="block">Initialize the <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRepository</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#deletePercentile-int-int-">deletePercentile</a></span>(int&nbsp;gameId,
                int&nbsp;gameMode)</code>
<div class="block">Deletes the percentile record for the specified game and game mode.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#deleteRating-int-int-">deleteRating</a></span>(int&nbsp;gameId,
            int&nbsp;playerId)</code>
<div class="block">Deletes the specified rating record.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#getMostRecentRatings-java.util.Collection-java.util.Collection-int-">getMostRecentRatings</a></span>(<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds,
                    <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;gameIds,
                    int&nbsp;gameIdSign)</code>
<div class="block">Load the most recently entered rating for each of a collection of players.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#getMostRecentRatings-java.util.Collection-int-">getMostRecentRatings</a></span>(<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds,
                    int&nbsp;gameIdSign)</code>
<div class="block">Load the most recently entered rating for each of a collection of players.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#getRating-int-int-">getRating</a></span>(int&nbsp;gameId,
         int&nbsp;playerId)</code>
<div class="block">Loads the rating for the given player for the given game and returns it as a
 <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRecord</code></a> object, or null if the player has no previous rating for the game.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#getRatings-int-java.lang.Integer...-">getRatings</a></span>(int&nbsp;gameId,
          <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>...&nbsp;players)</code>
<div class="block">Fetch the ratings registered for any of the given players for the given game and return
 them as a list of <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRecord</code></a> objects.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#getRatings-int-long-int-">getRatings</a></span>(int&nbsp;playerId,
          long&nbsp;since,
          int&nbsp;count)</code>
<div class="block">Fetch and return all the registered <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRecord</code></a> rows for the given player.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#getTopRatings-int-int-long-java.util.Set-">getTopRatings</a></span>(int&nbsp;gameId,
             int&nbsp;limit,
             long&nbsp;since,
             <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds)</code>
<div class="block">Returns the top-ratings for the specified game.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../../../com/threerings/parlor/rating/util/Percentiler.html" title="class in com.threerings.parlor.rating.util">Percentiler</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#loadPercentile-int-int-">loadPercentile</a></span>(int&nbsp;gameId,
              int&nbsp;gameMode)</code>
<div class="block">Loads the percentile distribution associated with the specified game and mode.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../../../../com/threerings/parlor/rating/util/Percentiler.html" title="class in com.threerings.parlor.rating.util">Percentiler</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#loadPercentiles-int-">loadPercentiles</a></span>(int&nbsp;gameId)</code>
<div class="block">Loads all the percentile distributions associated with the specified game.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#purgeGame-int-">purgeGame</a></span>(int&nbsp;gameId)</code>
<div class="block">Deletes all rating and percentile records for the specified game.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#purgePlayers-java.util.Collection-">purgePlayers</a></span>(<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds)</code>
<div class="block">Deletes all rating records for the specified players.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#setRating-int-int-int-int-">setRating</a></span>(int&nbsp;gameId,
         int&nbsp;playerId,
         int&nbsp;rating,
         int&nbsp;experience)</code>
<div class="block">Set the rating and experience for a given player and game.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html#updatePercentile-int-int-com.threerings.parlor.rating.util.Percentiler-">updatePercentile</a></span>(int&nbsp;gameId,
                int&nbsp;gameMode,
                <a href="../../../../../../com/threerings/parlor/rating/util/Percentiler.html" title="class in com.threerings.parlor.rating.util">Percentiler</a>&nbsp;tiler)</code>
<div class="block">Writes the supplied percentiler's data out to the database.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.samskivert.depot.DepotRepository">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.samskivert.depot.<a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true" title="class or interface in com.samskivert.depot">DepotRepository</a></h3>
<code><a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#ctx--" title="class or interface in com.samskivert.depot">ctx</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#delete-com.samskivert.depot.Key-" title="class or interface in com.samskivert.depot">delete</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#delete-T-" title="class or interface in com.samskivert.depot">delete</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#deleteAll-java.lang.Class-com.samskivert.depot.clause.WhereClause-" title="class or interface in com.samskivert.depot">deleteAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#deleteAll-java.lang.Class-com.samskivert.depot.clause.WhereClause-com.samskivert.depot.CacheInvalidator-" title="class or interface in com.samskivert.depot">deleteAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#deleteAll-java.lang.Class-com.samskivert.depot.clause.WhereClause-com.samskivert.depot.clause.Limit-" title="class or interface in com.samskivert.depot">deleteAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#deleteAll-java.lang.Class-com.samskivert.depot.clause.WhereClause-com.samskivert.depot.clause.Limit-com.samskivert.depot.CacheInvalidator-" title="class or interface in com.samskivert.depot">deleteAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#findAll-java.lang.Class-com.samskivert.depot.DepotRepository.CacheStrategy-java.lang.Iterable-" title="class or interface in com.samskivert.depot">findAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#findAll-java.lang.Class-com.samskivert.depot.DepotRepository.CacheStrategy-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">findAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#findAll-java.lang.Class-java.lang.Iterable-" title="class or interface in com.samskivert.depot">findAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#findAll-java.lang.Class-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">findAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#findAllKeys-java.lang.Class-boolean-java.lang.Iterable-" title="class or interface in com.samskivert.depot">findAllKeys</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#findAllKeys-java.lang.Class-boolean-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">findAllKeys</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#from-java.lang.Class-" title="class or interface in com.samskivert.depot">from</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#insert-T-" title="class or interface in com.samskivert.depot">insert</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#load-java.lang.Class-com.samskivert.depot.DepotRepository.CacheStrategy-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">load</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#load-java.lang.Class-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">load</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#load-com.samskivert.depot.Key-com.samskivert.depot.DepotRepository.CacheStrategy-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">load</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#load-com.samskivert.depot.Key-com.samskivert.depot.clause.QueryClause...-" title="class or interface in com.samskivert.depot">load</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#loadAll-java.lang.Class-java.lang.Iterable-" title="class or interface in com.samskivert.depot">loadAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#loadAll-java.lang.Iterable-" title="class or interface in com.samskivert.depot">loadAll</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#registerMigration-com.samskivert.depot.DataMigration-" title="class or interface in com.samskivert.depot">registerMigration</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#store-T-" title="class or interface in com.samskivert.depot">store</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#update-com.samskivert.depot.PersistentRecord-" title="class or interface in com.samskivert.depot">update</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#update-com.samskivert.depot.PersistentRecord-com.samskivert.depot.expression.SQLExpression...-" title="class or interface in com.samskivert.depot">update</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#update-T-com.samskivert.depot.expression.ColumnExp...-" title="class or interface in com.samskivert.depot">update</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#updatePartial-java.lang.Class-com.samskivert.depot.clause.WhereClause-com.samskivert.depot.CacheInvalidator-com.samskivert.depot.expression.ColumnExp:A-com.samskivert.depot.expression.SQLExpression:A-" title="class or interface in com.samskivert.depot">updatePartial</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#updatePartial-java.lang.Class-com.samskivert.depot.clause.WhereClause-com.samskivert.depot.CacheInvalidator-com.samskivert.depot.expression.ColumnExp-java.lang.Object-java.lang.Object...-" title="class or interface in com.samskivert.depot">updatePartial</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#updatePartial-java.lang.Class-com.samskivert.depot.clause.WhereClause-com.samskivert.depot.CacheInvalidator-java.util.Map-" title="class or interface in com.samskivert.depot">updatePartial</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#updatePartial-com.samskivert.depot.Key-com.samskivert.depot.expression.ColumnExp-java.lang.Object-java.lang.Object...-" title="class or interface in com.samskivert.depot">updatePartial</a>, <a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/DepotRepository.html?is-external=true#updatePartial-com.samskivert.depot.Key-java.util.Map-" title="class or interface in com.samskivert.depot">updatePartial</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RatingRepository-com.samskivert.depot.PersistenceContext-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RatingRepository</h4>
<pre>@Inject
public&nbsp;RatingRepository(<a href="http://threerings.github.com/depot/apidocs/com/samskivert/depot/PersistenceContext.html?is-external=true" title="class or interface in com.samskivert.depot">PersistenceContext</a>&nbsp;ctx)</pre>
<div class="block">Initialize the <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRepository.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRepository</code></a>.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRating-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRating</h4>
<pre>public&nbsp;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&nbsp;getRating(int&nbsp;gameId,
                              int&nbsp;playerId)</pre>
<div class="block">Loads the rating for the given player for the given game and returns it as a
 <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRecord</code></a> object, or null if the player has no previous rating for the game.</div>
</li>
</ul>
<a name="getRatings-int-java.lang.Integer...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRatings</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;&nbsp;getRatings(int&nbsp;gameId,
                                     <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>...&nbsp;players)</pre>
<div class="block">Fetch the ratings registered for any of the given players for the given game and return
 them as a list of <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRecord</code></a> objects. The size of this list is no less than zero
 and no greater than the number of given players.</div>
</li>
</ul>
<a name="getRatings-int-long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRatings</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;&nbsp;getRatings(int&nbsp;playerId,
                                     long&nbsp;since,
                                     int&nbsp;count)</pre>
<div class="block">Fetch and return all the registered <a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><code>RatingRecord</code></a> rows for the given player. Ratings
 will be returned in order of most recently to least recently updated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>since</code> - ratings last updated more than this number of milliseconds in the past will be
 ommitted from the result list. Supplying -1 will return all ratings regardless of age.</dd>
<dd><code>count</code> - the maximum number of ratings to return or -1 for all ratings.</dd>
</dl>
</li>
</ul>
<a name="getTopRatings-int-int-long-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTopRatings</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;&nbsp;getTopRatings(int&nbsp;gameId,
                                        int&nbsp;limit,
                                        long&nbsp;since,
                                        <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds)</pre>
<div class="block">Returns the top-ratings for the specified game. Players with equal rating will be sorted
 most recently played first.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>since</code> - an absolute number of milliseconds (ie. 10*24*60*60*1000L). Players that have
 not updated their rating within this many milliseconds in the past will be omitted from the
 results. Supply zero to omit this filter.</dd>
<dd><code>playerIds</code> - an optional list of player ids to which to limit the top-rankings search.</dd>
</dl>
</li>
</ul>
<a name="setRating-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRating</h4>
<pre>public&nbsp;void&nbsp;setRating(int&nbsp;gameId,
                      int&nbsp;playerId,
                      int&nbsp;rating,
                      int&nbsp;experience)</pre>
<div class="block">Set the rating and experience for a given player and game. This method will either update
 or create a row.</div>
</li>
</ul>
<a name="deleteRating-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteRating</h4>
<pre>public&nbsp;void&nbsp;deleteRating(int&nbsp;gameId,
                         int&nbsp;playerId)</pre>
<div class="block">Deletes the specified rating record.</div>
</li>
</ul>
<a name="loadPercentile-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadPercentile</h4>
<pre>public&nbsp;<a href="../../../../../../com/threerings/parlor/rating/util/Percentiler.html" title="class in com.threerings.parlor.rating.util">Percentiler</a>&nbsp;loadPercentile(int&nbsp;gameId,
                                  int&nbsp;gameMode)</pre>
<div class="block">Loads the percentile distribution associated with the specified game and mode. null will
 never be returned, rather a blank percentiler will be created and returned.</div>
</li>
</ul>
<a name="loadPercentiles-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadPercentiles</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../../../../com/threerings/parlor/rating/util/Percentiler.html" title="class in com.threerings.parlor.rating.util">Percentiler</a>&gt;&nbsp;loadPercentiles(int&nbsp;gameId)</pre>
<div class="block">Loads all the percentile distributions associated with the specified game. The percentilers
 will be mapped by their game mode. The map may be zero size if the game has recorded no
 distributions.</div>
</li>
</ul>
<a name="updatePercentile-int-int-com.threerings.parlor.rating.util.Percentiler-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updatePercentile</h4>
<pre>public&nbsp;void&nbsp;updatePercentile(int&nbsp;gameId,
                             int&nbsp;gameMode,
                             <a href="../../../../../../com/threerings/parlor/rating/util/Percentiler.html" title="class in com.threerings.parlor.rating.util">Percentiler</a>&nbsp;tiler)</pre>
<div class="block">Writes the supplied percentiler's data out to the database.</div>
</li>
</ul>
<a name="deletePercentile-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deletePercentile</h4>
<pre>public&nbsp;void&nbsp;deletePercentile(int&nbsp;gameId,
                             int&nbsp;gameMode)</pre>
<div class="block">Deletes the percentile record for the specified game and game mode.</div>
</li>
</ul>
<a name="purgeGame-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeGame</h4>
<pre>public&nbsp;void&nbsp;purgeGame(int&nbsp;gameId)</pre>
<div class="block">Deletes all rating and percentile records for the specified game.</div>
</li>
</ul>
<a name="purgePlayers-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgePlayers</h4>
<pre>public&nbsp;void&nbsp;purgePlayers(<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds)</pre>
<div class="block">Deletes all rating records for the specified players.</div>
</li>
</ul>
<a name="getMostRecentRatings-java.util.Collection-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMostRecentRatings</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;&nbsp;getMostRecentRatings(<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds,
                                                     int&nbsp;gameIdSign)</pre>
<div class="block">Load the most recently entered rating for each of a collection of players. The search may
 be limited to only negative or positive id's since applications may use the sign to indicate
 game mode.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gameIdSign</code> - if non-zero, limits the search to game ids of matching sign</dd>
</dl>
</li>
</ul>
<a name="getMostRecentRatings-java.util.Collection-java.util.Collection-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getMostRecentRatings</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist">RatingRecord</a>&gt;&nbsp;getMostRecentRatings(<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;playerIds,
                                                     <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;gameIds,
                                                     int&nbsp;gameIdSign)</pre>
<div class="block">Load the most recently entered rating for each of a collection of players. The search may
 be limited to a specific collection of games.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gameIds</code> - if not null, limits the search to the specific game ids</dd>
<dd><code>gameIdSign</code> - if non-zero, limits the search to game ids of matching sign</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RatingRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/threerings/parlor/rating/server/persist/RatingRecord.html" title="class in com.threerings.parlor.rating.server.persist"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/threerings/parlor/rating/server/persist/RatingRepository.html" target="_top">Frames</a></li>
<li><a href="RatingRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.com.samskivert.depot.DepotRepository">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All rights reserved.</small></p>
</body>
</html>
